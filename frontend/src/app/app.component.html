<ion-app>
  <!-- Menú lateral -->
  <ion-menu side="start" content-id="main-content">
    <ion-header>
      <ion-toolbar color="primary">
        <ion-title>
          <div class="menu-header">
            <img src="assets/certificados/cnc.png" alt="Logo" class="menu-logo">
            <span>CNC Portal</span>
          </div>
        </ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding menu-content">
      <!-- Perfil del usuario (si está autenticado) -->
      <div *ngIf="userName()" class="user-profile">
        <div class="profile-avatar">
          <ion-icon name="person-circle-outline"></ion-icon>
        </div>
        <div class="profile-details">
          <h2>{{ userName() }}</h2>
          <p>{{ userRole() }}</p>
        </div>
      </div>

      <!-- Opciones del menú -->
      <ion-list class="menu-list">
        <!-- Botón Home para todos -->
        <ion-item button detail="false" (click)="navegarModulo('/')" class="menu-item">
          <ion-icon name="home-outline" slot="start"></ion-icon>
          <ion-label>Inicio</ion-label>
        </ion-item>

        <!-- Opción para ir al login si no está autenticado -->
        <ion-item *ngIf="!userName()" button detail="false" (click)="iraLogin()" class="menu-item highlight-item">
          <ion-icon name="log-in-outline" slot="start"></ion-icon>
          <ion-label>Iniciar Sesión</ion-label>
        </ion-item>

        <!-- Módulos dinámicos según el rol del usuario autenticado -->
        <ion-item-divider *ngIf="modulos().length > 0" class="menu-divider">
          <ion-label>Acciones</ion-label>
        </ion-item-divider>

        <ion-item *ngFor="let modulo of modulos()" button detail="false" (click)="navegarModulo(modulo)"
          class="menu-item">
          <ion-icon [name]="getIconForModule(modulo)" slot="start"></ion-icon>
          <ion-label>{{ modulo }}</ion-label>
        </ion-item>

        <!-- Opciones para usuarios no autenticados -->
        <ion-item-divider *ngIf="!userName()" class="menu-divider">
          <ion-label>Información</ion-label>
        </ion-item-divider>

        <ng-container *ngIf="!userName()">
          <ion-item button detail="false" (click)="navegarModulo('informacion')" class="menu-item">
            <ion-icon name="information-circle-outline" slot="start"></ion-icon>
            <ion-label>Acerca de Nosotros</ion-label>
          </ion-item>
          <ion-item button detail="false" (click)="navegarModulo('direccion')" class="menu-item">
            <ion-icon name="location-outline" slot="start"></ion-icon>
            <ion-label>Dirección</ion-label>
          </ion-item>
          <ion-item button detail="false" (click)="navegarModulo('historia')" class="menu-item">
            <ion-icon name="book-outline" slot="start"></ion-icon>
            <ion-label>Historia</ion-label>
          </ion-item>
          <ion-item button detail="false" (click)="navegarModulo('norma-regul')" class="menu-item">
            <ion-icon name="document-text-outline" slot="start"></ion-icon>
            <ion-label>Norma Reguladora</ion-label>
          </ion-item>
          <ion-item button detail="false" (click)="navegarModulo('servi-progra')" class="menu-item">
            <ion-icon name="calendar-outline" slot="start"></ion-icon>
            <ion-label>Servicios y Programas</ion-label>
          </ion-item>
        </ng-container>

        <!-- Opción para cerrar sesión -->
        <ion-item-divider *ngIf="userName()" class="menu-divider">
          <ion-label>Sesión</ion-label>
        </ion-item-divider>

        <ion-item *ngIf="userName()" button detail="false" (click)="cerrarSesion()" class="menu-item logout-item">
          <ion-icon name="log-out-outline" slot="start"></ion-icon>
          <ion-label>Cerrar sesión</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-menu>

  <!-- Contenido principal -->
  <ion-router-outlet id="main-content"></ion-router-outlet>
</ion-app>