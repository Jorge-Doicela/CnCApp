<ion-header class="ion-no-border">
  <ion-toolbar>
    <div class="container header-inner">
      <div class="brand" (click)="navegarModulo('home')">
        <ion-buttons slot="start" class="ion-hide-lg-up">
          <ion-button (click)="toggleMenu()" color="dark">
            <ion-icon slot="icon-only" name="menu-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
        <img src="assets/cnc.png" alt="CNC Logo" class="nav-logo">
        <div class="brand-text">
          <h1>CNC</h1>
          <small>Ecuador</small>
        </div>
      </div>

      <!-- Desktop Navigation (Center) -->
      <nav class="desktop-nav" *ngIf="isGuest()">
        <a (click)="navegarModulo('/')" class="nav-link active">Inicio</a>
        <a (click)="navegarModulo('servi-progra')" class="nav-link">Servicios</a>
        <a (click)="navegarModulo('validar-certificados')" class="nav-link">Validar</a>
        <!-- Expanded Public Links -->
        <a (click)="navegarModulo('historia')" class="nav-link">Historia</a>
        <a (click)="navegarModulo('direccion')" class="nav-link">Dirección</a>
        <a (click)="navegarModulo('norma-regul')" class="nav-link">Normativa</a>
        <a (click)="navegarModulo('informacion')" class="nav-link">Nosotros</a>
      </nav>

      <div class="header-actions">
        <!-- Logged In -->
        <div class="user-pill" *ngIf="!isGuest()" (click)="navegarModulo('Ver Perfil')">
          <div class="avatar">{{ userName()?.charAt(0) }}</div>
          <span>{{ (userName() || '').split(' ')[0] }}</span>
        </div>

        <!-- Guest -->
        <ng-container *ngIf="isGuest()">
          <button class="btn-login" (click)="iraLogin()">Ingresar</button>
          <button class="btn-register" (click)="iraRegistro()">Crear Cuenta</button>
        </ng-container>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <!-- ========================================== -->
  <!-- 1. GUEST LANDING PAGE (Clean Modern)     -->
  <!-- ========================================== -->
  <ng-container *ngIf="isGuest()">
    <div class="hero-wrapper">
      <div class="mesh-bg"></div>
      <div class="container hero-content">
        <span class="pill-label">Formación Profesional</span>
        <div class="animate-fade-up">
          <h2>Capacitación oficial para el <span>Sector Público</span></h2>
          <p>Accede a programas educativos de alto nivel, obtén certificaciones avaladas por el CNC y fortalece tus
            competencias profesionales.</p>

          <div class="hero-actions">
            <button class="primary" (click)="iraRegistro()">
              Comenzar Ahora <ion-icon name="arrow-forward"></ion-icon>
            </button>
            <button class="secondary" (click)="navegarModulo('servi-progra')">
              Nuestros Servicios
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="container section-padding">
      <div class="clean-grid">
        <div class="feature-card">
          <div class="icon-box"><ion-icon name="shield-checkmark"></ion-icon></div>
          <h3>Certificación Avalada</h3>
          <p>Documentos oficiales válidos para concursos de méritos y oposición en el sector público.</p>
        </div>
        <div class="feature-card">
          <div class="icon-box"><ion-icon name="time"></ion-icon></div>
          <h3>Acceso Flexible</h3>
          <p>Plataforma disponible 24/7. Avanza a tu propio ritmo desde cualquier dispositivo.</p>
        </div>
        <div class="feature-card">
          <div class="icon-box"><ion-icon name="ribbon"></ion-icon></div>
          <h3>Desarrollo Continuo</h3>
          <p>Cursos actualizados constantemente según las necesidades del territorio.</p>
        </div>
      </div>
    </div>
  </ng-container>


  <!-- ========================================== -->
  <!-- 2. LOGGED IN DASHBOARDS (Clean)          -->
  <!-- ========================================== -->
  <ng-container *ngIf="!isGuest()">
    <!-- Compact Hero greeting -->
    <div class="hero-wrapper compact">
      <div class="container hero-content">
        <h2 style="font-size: 2rem;">Hola, <span>{{ (userName() || '').split(' ')[0] }}</span></h2>
        <p style="margin:0; font-size: 1rem;">
          {{ isAdmin() ? 'Panel de Administración' : (isCreator() ? 'Gestión de Conferencias' : 'Bienvenido a tu portal
          de aprendizaje') }}
        </p>
      </div>
    </div>

    <div class="container" style="margin-top: -20px; padding-bottom: 60px;">

      <!-- Stats Strip (All Users) -->
      <div class="stats-strip animate-fade-up">
        <div class="stat-unit" *ngIf="isAdmin()">
          <span class="label">Usuarios Totales</span>
          <span class="value">{{ usuariosCount }}</span>
        </div>
        <div class="stat-unit" *ngIf="isAdmin() || isCreator()">
          <span class="label">Conferencias</span>
          <span class="value">{{ isAdmin() ? conferenciasCount : myConferencesCount }}</span>
        </div>
        <div class="stat-unit" *ngIf="isUser() && !isAdmin()">
          <span class="label">Inscripciones</span>
          <span class="value">{{ ConferenciasInscritas.length }}</span>
        </div>
        <div class="stat-unit">
          <span class="label">Certificados</span>
          <span class="value">{{ isAdmin() ? certificadosCount : certificadosDisponibles }}</span>
        </div>
      </div>

      <!-- DASHBOARD GRIDS -->

      <!-- ADMIN DASHBOARD SECTIONS -->
      <div *ngIf="isAdmin()">

        <!-- 1. ACCESO Y USUARIOS -->
        <h3 class="dash-section-title">Control de Acceso</h3>
        <div class="dashboard-grid">
          <div class="dash-card card-wide" (click)="navegarModulo('gestionar-usuarios')">
            <div class="icon-circle"><ion-icon name="people"></ion-icon></div>
            <h4>Usuarios</h4>
            <p>Cuentas y Accesos</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-roles')">
            <div class="icon-circle"><ion-icon name="key-outline"></ion-icon></div>
            <h4>Roles</h4>
            <p>Permisos y Perfiles</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
        </div>

        <!-- 2. GESTIÓN DE EVENTOS -->
        <h3 class="dash-section-title">Gestión de Eventos</h3>
        <div class="dashboard-grid">
          <div class="dash-card" (click)="navegarModulo('gestionar-capacitaciones')">
            <div class="icon-circle"><ion-icon name="easel"></ion-icon></div>
            <h4>Conferencias</h4>
            <p>Crear y editar</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-plantillas')">
            <div class="icon-circle"><ion-icon name="image"></ion-icon></div>
            <h4>Plantillas</h4>
            <p>Diseños de certif.</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-reportes')">
            <div class="icon-circle"><ion-icon name="stats-chart-outline"></ion-icon></div>
            <h4>Reportes</h4>
            <p>Estadísticas</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
        </div>

        <!-- 3. ORGANIZACIÓN TERRITORIAL -->
        <h3 class="dash-section-title">Organización Territorial</h3>
        <div class="dashboard-grid">
          <div class="dash-card" (click)="navegarModulo('gestionar-provincias')">
            <div class="icon-circle"><ion-icon name="map-outline"></ion-icon></div>
            <h4>Provincias</h4>
            <p>Territorio</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-cantones')">
            <div class="icon-circle"><ion-icon name="location-outline"></ion-icon></div>
            <h4>Cantones</h4>
            <p>Ciudades</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-parroquias')">
            <div class="icon-circle"><ion-icon name="pin-outline"></ion-icon></div>
            <h4>Parroquias</h4>
            <p>Localidades</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
        </div>

        <!-- 4. INSTITUCIONAL -->
        <h3 class="dash-section-title">Institucional</h3>
        <div class="dashboard-grid">
          <div class="dash-card" (click)="navegarModulo('gestionar-entidades')">
            <div class="icon-circle"><ion-icon name="business"></ion-icon></div>
            <h4>Entidades</h4>
            <p>Organismos</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-instituciones')">
            <div class="icon-circle"><ion-icon name="business-outline"></ion-icon></div>
            <h4>Instituciones</h4>
            <p>Dependencias</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-cargos-instituciones')">
            <div class="icon-circle"><ion-icon name="id-card-outline"></ion-icon></div>
            <h4>Cargos</h4>
            <p>Puestos</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-competencias')">
            <div class="icon-circle"><ion-icon name="ribbon-outline"></ion-icon></div>
            <h4>Competencias</h4>
            <p>Facultades</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
        </div>

        <!-- 5. PORTAL PÚBLICO -->
        <h3 class="dash-section-title">Portal Público</h3>
        <div class="dashboard-grid">
          <div class="dash-card" (click)="navegarModulo('servi-progra')">
            <div class="icon-circle"><ion-icon name="calendar-outline"></ion-icon></div>
            <h4>Servicios</h4>
            <p>Oferta pública</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('validar-certificados')">
            <div class="icon-circle"><ion-icon name="qr-code-outline"></ion-icon></div>
            <h4>Validar</h4>
            <p>Verificar cert.</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('historia')">
            <div class="icon-circle"><ion-icon name="book-outline"></ion-icon></div>
            <h4>Historia</h4>
            <p>Trayectoria</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('direccion')">
            <div class="icon-circle"><ion-icon name="map-outline"></ion-icon></div>
            <h4>Dirección</h4>
            <p>Ubicación</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('norma-regul')">
            <div class="icon-circle"><ion-icon name="document-text-outline"></ion-icon></div>
            <h4>Normativa</h4>
            <p>Regulaciones</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('informacion')">
            <div class="icon-circle"><ion-icon name="information-circle-outline"></ion-icon></div>
            <h4>Nosotros</h4>
            <p>Información</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
        </div>

      </div>

      <!-- CREATOR (CONFERENCISTA) -->
      <div *ngIf="isCreator()">
        <h3 class="dash-section-title">Gestión de Eventos</h3>
        <div class="dashboard-grid">
          <div class="dash-card card-wide" (click)="navegarModulo('gestionar-capacitaciones')">
            <div class="icon-circle"><ion-icon name="easel"></ion-icon></div>
            <h4>Mis Eventos</h4>
            <p>Tus conferencias asignadas</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('gestionar-plantillas')">
            <div class="icon-circle"><ion-icon name="image"></ion-icon></div>
            <h4>Plantillas</h4>
            <p>Diseños de certif.</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('validar-certificados')">
            <div class="icon-circle"><ion-icon name="qr-code"></ion-icon></div>
            <h4>Validar</h4>
            <p>Scanner QR</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
        </div>

        <h3 class="dash-section-title">Mi Espacio</h3>
        <div class="dashboard-grid">
          <div class="dash-card" (click)="navegarModulo('Ver conferencias')">
            <div class="icon-circle"><ion-icon name="search"></ion-icon></div>
            <h4>Explorar</h4>
            <p>Oferta académica</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('Ver certificaciones')">
            <div class="icon-circle"><ion-icon name="ribbon"></ion-icon></div>
            <h4>Mis Títulos</h4>
            <p>Certificados obtenidos</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
          <div class="dash-card" (click)="navegarModulo('Ver Perfil')">
            <div class="icon-circle"><ion-icon name="person"></ion-icon></div>
            <h4>Mi Perfil</h4>
            <p>Mis datos</p>
            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
          </div>
        </div>
      </div>

      <!-- USER -->
      <div class="dashboard-grid" *ngIf="isUser()">
        <div class="dash-card card-wide" (click)="navegarModulo('Ver conferencias')">
          <div class="icon-circle"><ion-icon name="search"></ion-icon></div>
          <h4>Explorar Cursos</h4>
          <p>Ver oferta académica disponible</p>
          <ion-icon name="arrow-forward" class="arrow"></ion-icon>
        </div>
        <div class="dash-card" (click)="navegarModulo('Ver certificaciones')">
          <div class="icon-circle"><ion-icon name="ribbon"></ion-icon></div>
          <h4>Mis Certificados</h4>
          <p>Descargar diplomas</p>
          <ion-icon name="arrow-forward" class="arrow"></ion-icon>
        </div>
        <div class="dash-card" (click)="navegarModulo('Ver Perfil')">
          <div class="icon-circle"><ion-icon name="person"></ion-icon></div>
          <h4>Mi Perfil</h4>
          <p>Mis datos</p>
          <ion-icon name="arrow-forward" class="arrow"></ion-icon>
        </div>
      </div>

    </div>
  </ng-container>

  <!-- Footer Simple -->
  <div class="ion-text-center"
    style="padding: 40px; color: var(--ion-color-medium); font-size: 0.8rem; border-top: 1px solid var(--surface-border);">
    <p>&copy; 2026 Consejo Nacional de Competencias</p>
  </div>
</ion-content>